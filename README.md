# Data about companies and vacancies from  [hh.ru](http://hh.ru/)

---

Цель проекта заключается в получение данных о компаниях и вакансиях с сайта [hh.ru](http://hh.ru) и сохранении их в базу данных Postgres.

## Установка и использование

---

Для работы программы необходимо установить зависимости, указанные в `pyproject.toml`.

Для работы с базой данных необходимо создать файл `database.ini` с параметрами доступа к базе данных PostgresSQL.

Пример заполнения файла `database.ini`:

[postgresql]
host=your_host
user=your_user
password=your_password
port=your_port

## Структура проекта

---

### Основной файл

`main.py` содержит функцию `main`, которая запускает цепочку действий по запуску сбора информации о компаниях, их вакансиях,записи данных в базу данных PostgresSQL и вывода данных в консоль.

### Функции

`utils.py` содержит:

- Функция `get_vacancy_company` получает данные о вакансиях через API hh.ru.
- Функция `create_database` создает БД и таблицы для хранения данных о компаниях и вакансиях.
- Функция `create_tables` создает таблицы employers и vacancies, а также устанавливает связь между ними по  employer_id.
- Функция  `insert_data` заполняет таблицы employers и vacancies данными, полученными с hh.ru.

### Класс DBManager

`db_manager.py` содержит класс `DBManager`, который позволяет работать с базой данных PostgresSQL. Содержит методы получения данных из таблицы:

- `get_companies_and_vacancies_count()`: получает список всех компаний и количество вакансий у каждой компании.
- `get_all_vacancies()`: получает список всех вакансий с указанием названия компании, названия вакансии и зарплаты и ссылки на вакансию.
- `get_avg_salary()`: получает среднюю зарплату по вакансиям.
- `get_vacancies_with_higher_salary()`: получает список всех вакансий, у которых зарплата выше средней по всем вакансиям.
- `get_vacancies_with_keyword()`: получает список всех вакансий, в названии которых содержится переданное слово.